/**************************************************************************************************
MERGE K SORTED LINKED LISTS
**************************************************************************************************

You are given an array of k linked-lists `lists`, each linked-list is sorted in ascending order.

Merge all the linked-lists into one sorted linked-list and return it.

--------------------------------------------------------------------------------------------------
Example 1:
Input:  lists = [[1,4,5],[1,3,4],[2,6]]
Output: [1,1,2,3,4,4,5,6]

Example 2:
Input:  lists = []
Output: []

Example 3:
Input:  lists = [[]]
Output: []

--------------------------------------------------------------------------------------------------
Constraints:
- k == lists.length
- 0 <= k <= 10^4
- 0 <= lists[i].length <= 500
- -10^4 <= lists[i][j] <= 10^4
- lists[i] is sorted in ascending order
- Sum of lists[i].length will not exceed 10^4
**************************************************************************************************/

class Solution {
public:
    
    ListNode* mergeTwoLists(ListNode* list1, ListNode* list2)
    {
        if (list1 == NULL) return list2;
        if (list2 == NULL) return list1;

        if (list1->val <= list2->val)
        {
            list1->next = mergeTwoLists(list1->next, list2);
            return list1;
        }
        else
        {
            list2->next = mergeTwoLists(list2->next, list1);
            return list2;
        }

        return NULL;
    }

    ListNode* PartitionAndMerge(int start, int end, vector<ListNode*>& lists)
    {
        if (start > end) return NULL;
        if (start == end) return lists[start];

        int mid = start + (end - mid) / 2;

        ListNode* L1 = PartitionAndMerge(start, mid, lists);
        ListNode* L2 = PartitionAndMerge(mid + 1, end, lists);

        return mergeTwoLists(L1, L2);
    }

    ListNode* mergeKLists(vector<ListNode*>& lists)
    {
        int k = lists.size();
        if (k == 0)
            return NULL;

        return PartitionAndMerge(0, k - 1, lists);
    }
};
